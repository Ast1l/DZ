<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест ЗИ: Урок 1–2 (Сложный режим)</title>
    <style>
        body {background:#000;color:#0f0;font-family:'Courier New',monospace;margin:0;padding:20px;line-height:1.6;}
        .container {max-width:900px;margin:0 auto;background:rgba(10,10,10,0.95);padding:30px;border-radius:15px;border:2px solid #0f0;box-shadow:0 0 30px #0f0;}
        h1 {text-align:center;color:#0f0;text-shadow:0 0 20px #0f0;font-size:2.5em;animation:pulse 2s infinite;}
        @keyframes pulse {0%{text-shadow:0 0 20px #0f0;}50%{text-shadow:0 0 40px #0f0,0 0 60px #0f0;}100%{text-shadow:0 0 20px #0f0;}}
        .timer {text-align:center;font-size:1.8em;margin:20px 0;text-shadow:0 0 10px #0f0;}
        .progress {text-align:center;margin:15px 0;font-size:1.2em;}
        .question-block {background:#111;padding:25px;margin:20px 0;border-radius:10px;border:1px solid #0f0;min-height:300px;}
        .options label {display:block;margin:15px 0;padding:14px;background:#000;border:1px solid #333;border-radius:8px;cursor:pointer;transition:all 0.3s;}
        .options label:hover {background:#003300;border-color:#0f0;}
        .options input[type="radio"] {margin-right:10px;}
        .selected-correct {background:#004400 !important;border-color:#0f0 !important;}
        .selected-wrong {background:#440000 !important;border-color:#f00 !important;}
        .nav-buttons {text-align:center;margin:30px 0;}
        button {background:#0f0;color:#000;border:none;padding:14px 28px;font-size:1.2em;cursor:pointer;border-radius:5px;margin:0 10px;box-shadow:0 0 20px #0f0;font-weight:bold;}
        button:hover:not(:disabled) {background:#00ff00;}
        button:disabled {background:#003300;cursor:not-allowed;opacity:0.6;}
        .result {font-size:2em;text-align:center;margin:40px 0;padding:30px;border:2px solid #0f0;border-radius:15px;animation:pulse 3s infinite;}
        input#name {width:100%;padding:15px;background:#000;border:1px solid #0f0;color:#0f0;font-size:1.3em;text-align:center;border-radius:8px;margin:20px 0;}
        footer {text-align:center;margin-top:50px;color:#0f0;font-size:1.2em;}
    </style>
</head>
<body>
    <div class="container">
        <h1>ТЕСТ ПО ЗИ: УРОК 1–2 (СЛОЖНЫЙ РЕЖИМ)</h1>
        <div class="timer" id="timer">10:00</div>
        <div class="progress" id="progress"></div>

        <div id="fioScreen">
            <h2 style="text-align:center;">Введите ФИО полностью</h2>
            <input type="text" id="name" placeholder="Иванов Иван Иванович" autocomplete="off">
            <div class="nav-buttons">
                <button onclick="startQuiz()">Начать тест</button>
            </div>
        </div>

        <div id="quizScreen" style="display:none;">
            <div class="question-block" id="questionContainer"></div>
            <div class="nav-buttons">
                <button id="prevBtn" onclick="prevQuestion()" disabled>Назад</button>
                <button id="nextBtn" onclick="nextQuestion()">Вперёд</button>
            </div>
        </div>

        <div id="resultScreen" class="result" style="display:none;">
            <h2 id="finalName"></h2>
            <h2 id="finalText">Тест завершён!</h2>
            <p id="scoreText" style="font-size:1.8em;"></p>
            <button onclick="location.reload()">Пройти заново</button>
        </div>
    </div>

    <footer>Сложный режим • 50 вопросов • Удачи!</footer>

    <script>
        const questions = [
            {q: "Что означает аббревиатура ПАС ЗИ?", options: ["Программно-аппаратный комплекс защиты информации","Пассивная автоматизированная система защиты","Протокол аутентификации сетевых интерфейсов","Программный анализатор сетевых угроз"], correct: 0},
            {q: "Какой основной функцией обладает межсетевой экран?", options: ["Фильтрация и контроль сетевого трафика","Шифрование передаваемых данных","Резервное копирование информации","Ускорение интернет-соединения"], correct: 0},
            {q: "IDS расшифровывается как:", options: ["Система обнаружения вторжений","Система идентификации документов","Интернет-шлюз безопасности","Интегрированная диагностическая система"], correct: 0},
            {q: "IPS отличается от IDS тем, что:", options: ["Активно блокирует угрозы","Только фиксирует события","Работает на канальном уровне","Использует только сигнатурный анализ"], correct: 0},
            {q: "Главная задача DLP-системы:", options: ["Предотвращение утечек конфиденциальной информации","Защита от распределённых атак","Обнаружение вирусов на конечных устройствах","Шифрование жёстких дисков"], correct: 0},
            {q: "SIEM-система предназначена для:", options: ["Сбора, корреляции и анализа событий безопасности","Мониторинга производительности серверов","Управления конфигурациями устройств","Автоматического резервного копирования"], correct: 0},
            {q: "VPN обеспечивает:", options: ["Создание защищённого туннеля в публичных сетях","Прямое подключение к удалённому рабочему столу","Блокировку вредоносных сайтов","Сжатие трафика для экономии"], correct: 0},
            {q: "WAF защищает:", options: ["Веб-приложения от атак прикладного уровня","Сеть от DDoS-атак","Конечные устройства от вирусов","Базы данных от SQL-инъекций напрямую"], correct: 0},
            {q: "Honeypot — это:", options: ["Ловушка, имитирующая уязвимую систему","Сервер для хранения резервных копий","Антивирусная песочница","Система мониторинга трафика"], correct: 0},
            {q: "Принцип Zero Trust гласит:", options: ["Никому не доверять — всегда проверять","Доверять устройствам внутри периметра","Проверять только внешний трафик","Доверять по IP-адресу"], correct: 0},
            {q: "Стандартный порт HTTPS:", options: ["443","80","22","3389"], correct: 0},
            {q: "DMZ (демилитаризованная зона) используется для:", options: ["Размещения публично доступных серверов","Хранения резервных копий","Размещения рабочих станций сотрудников","Скрытия внутренней сети"], correct: 0},
            {q: "NAC — это система:", options: ["Контроля допуска устройств в сеть","Антивирусной защиты рабочих станций","Управления доменом Active Directory","Мониторинга производительности"], correct: 0},
            {q: "IPsec работает на уровне модели OSI:", options: ["Сетевом (3-й уровень)","Канальном (2-й уровень)","Транспортном (4-й уровень)","Прикладном (7-й уровень)"], correct: 0},
            {q: "СКЗИ расшифровывается как:", options: ["Средство криптографической защиты информации","Система контроля защищённости информации","Сервер криптографической инфраструктуры","Сетевой контроллер защиты информации"], correct: 0},
            {q: "ФЗ регулирует обработку персональных данных в РФ:", options: ["152-ФЗ","187-ФЗ","149-ФЗ","98-ФЗ"], correct: 0},
            {q: "187-ФЗ касается:", options: ["Безопасности критической информационной инфраструктуры","Электронной подписи","Коммерческой тайны","Государственной тайны"], correct: 0},
            {q: "Максимальный уровень защищённости ПДн в ИСПДн:", options: ["УЗ-1","УЗ-2","УЗ-3","УЗ-4"], correct: 0},
            {q: "Алгоритм «Кузнечик» — это:", options: ["Симметричный блочный шифр с ключом 256 бит","Асимметричный алгоритм с открытым ключом","Хэш-функция для проверки целостности","Потоковый шифр"], correct: 0},
            {q: "EDR-система — это:", options: ["Обнаружение и реагирование на угрозы на конечных точках","Восстановление данных после сбоя","Шифрование жёстких дисков","Резервное копирование рабочих станций"], correct: 0},
            {q: "Безопасный протокол удалённого администрирования:", options: ["SSH","Telnet","RDP без шифрования","VNC"], correct: 0},
            {q: "TLS 1.3 — это:", options: ["Актуальный протокол шифрования транспортного уровня","Устаревший протокол SSL 3.0","Протокол туннелирования VPN","Стандарт шифрования дисков"], correct: 0},
            {q: "Ransomware — это:", options:options: ["Вредоносная программа-шифровальщик","Программа для кражи паролей","Ботнет для DDoS","Троян для скрытого майнинга"], correct: 0},
            {q: "Brute-force — это атака:", options: ["Перебором возможных паролей","По словарю популярных паролей","С помощью радужных таблиц","Социальной инженерией"], correct: 0},
            {q: "Порт 22 по умолчанию использует:", options: ["SSH","HTTPS","FTPS","SMTP"], correct: 0},
            {q: "SOAR — это платформа для:", options: ["Автоматизации реагирования на инциденты","Анализа логов безопасности","Мониторинга сетевого трафика","Управления антивирусами"], correct: 0},
            {q: "Приказ ФСТЭК № 239 определяет:", options: ["Правила категорирования объектов КИИ","Требования к СКЗИ","Порядок аттестации ИСПДн","Требования к антивирусам"], correct: 0},
            {q: "Rootkit — это вредоносная программа, которая:", options: ["Скрывает своё присутствие в системе","Шифрует файлы пользователя","Крадёт пароли из браузера","Создаёт ботнет"], correct: 0},
            {q: "ГОСТ Р 57580.1-2017 регулирует:", options: ["Защиту значимых объектов КИИ","Обработку персональных данных","Требования к электронной подписи","Аттестацию средств защиты"], correct: 0},
            {q: "Атака «человек посередине» на английском:", options: ["Man-in-the-Middle (MitM)","Man-in-the-Browser","Drive-by download","Clickjacking"], correct: 0},
            {q: "XSS — это уязвимость типа:", options: ["Межсайтовый скриптинг","Подделка межсайтовых запросов","Инъекция в базу данных","Переполнение буфера"], correct: 0},
            {q: "CSRF — это:", options: ["Подделка межсайтовых запросов","Выполнение скриптов на стороне клиента","Кража сессионных cookie","Фишинг через email"], correct: 0},
            {q: "Роскомнадзор является оператором:", options: ["Реестра операторов персональных данных","Лицензий на СКЗИ","Сертификатов ФСБ","Аттестации объектов КИИ"], correct: 0},
            {q: "Класс КС3 СКЗИ предназначен для защиты:", options: ["Государственной тайны","Персональных данных уровня УЗ-1","Коммерческой тайны","Открытой информации"], correct: 0},
            {q: "Какой порт использует SMTP?", options: ["25","465","587","110"], correct: 0},
            {q: "Watering hole — это атака через:", options: ["Заражение часто посещаемого сайта","Создание поддельной точки Wi-Fi","Фишинговое письмо","Подмену DNS"], correct: 0},
            {q: "Какой орган выдаёт лицензии ФСТЭК на деятельность по ТЗКИ?", options: ["ФСТЭК России","ФСБ России","Роскомнадзор","Минцифры"], correct: 0},
            {q: "Как называется атака с подменой легитимной точки доступа?", options: ["Evil Twin","Rogue AP","ARP-spoofing","Deauthentication attack"], correct: 1},
            {q: "Какой стандарт является российским аналогом ISO 27001?", options: ["ГОСТ Р ИСО/МЭК 27001-2021","PCI DSS","NIST SP 800-53","CIS Controls"], correct: 0},
            {q: "Какой алгоритм используется в электронной подписи по ГОСТ?", options: ["ГОСТ Р 34.10-2012","RSA-2048","ECDSA","DSA"], correct: 0},
            {q: "Какой уровень защиты ПДн требует обязательного СКЗИ?", options: ["УЗ-1 и УЗ-2","Только УЗ-1","УЗ-3 и УЗ-4","Не требует"], correct: 0},
            {q: "Как называется атака с внедрением вредоносного кода в легитимный сайт?", options: ["Drive-by download","XSS","CSRF","Clickjacking"], correct: 0},
            {q: "Какой протокол использует порт 3389?", options: ["RDP (Remote Desktop Protocol)","SSH","VNC","Telnet"], correct: 0},
            {q: "Какой документ обязателен при обработке ПДн?", options: ["Политика обработки персональных данных","Акт классификации ИСПДн","Лицензия ФСТЭК","Сертификат соответствия"], correct: 0},
            {q: "Какой порт использует IMAP по умолчанию?", options: ["143","993","110","995"], correct: 0},
            {q: "Как называется система, автоматически блокирующая IP при подозрительной активности?", options: ["Fail2Ban","Snort","Suricata","OSSEC"], correct: 0},
            {q: "Какой класс вирусов скрывает своё присутствие и модифицирует систему?", options: ["Руткиты","Шифровальщики","Трояны","Черви"], correct: 0},
            {q: "Какой орган проводит аттестацию объектов информатизации?", options: ["ФСТЭК России","ФСБ России","Роскомнадзор","Минобороны"], correct: 0},
            {q: "Как называется атака с подменой DNS-записей?", options: ["DNS-spoofing","ARP-poisoning","Session hijacking","Replay attack"], correct: 0},
            {q: "Какой протокол обеспечивает целостность и конфиденциальность на сетевом уровне?", options: ["IPsec","SSL/TLS","SSH","PPTP"], correct: 0}
        ];

        // Остальной скрипт полностью идентичен — только вопросы изменены
        let selectedQuestions = [];
        let currentQuestion = 0;
        let answers = new Array(10).fill(null);
        let userName = "";
        let timerInterval;
        let timeLeft = 600;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const mins = String(Math.floor(timeLeft / 60)).padStart(2, '0');
                const secs = String(timeLeft % 60).padStart(2, '0');
                document.getElementById('timer').textContent = `${mins}:${secs}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endQuiz(true);
                }
            }, 1000);
        }

        function startQuiz() {
            userName = document.getElementById('name').value.trim();
            if (!userName) { alert("Введите ФИО!"); return; }

            const shuffled = [...questions];
            shuffle(shuffled);
            selectedQuestions = shuffled.slice(0,10);

            selectedQuestions.forEach(q => {
                const mixed = q.options.map((text, i) => ({text, correct: i === q.correct}));
                shuffle(mixed);
                q.shuffled = mixed;
            });

            document.getElementById('fioScreen').style.display = 'none';
            document.getElementById('quizScreen').style.display = 'block';
            startTimer();
            showQuestion(0);
        }

        function showQuestion(n) {
            currentQuestion = n;
            const q = selectedQuestions[n];
            const container = document.getElementById('questionContainer');
            document.getElementById('progress').textContent = `Вопрос ${n + 1} из 10`;

            container.innerHTML = `
                <h2>${n + 1}. ${q.q}</h2>
                <div class="options">
                    ${q.shuffled.map((opt, i) => `
                        <label>
                            <input type="radio" name="answer" value="${i}"
                                ${answers[n] !== null ? (answers[n] === i ? 'checked' : 'disabled') : ''}>
                            ${opt.text}
                        </label>
                    `).join('')}
                </div>
            `;

            if (answers[n] !== null) {
                const labels = container.querySelectorAll('label');
                labels.forEach((lbl, i) => {
                    lbl.querySelector('input').disabled = true;
                    if (i === answers[n]) {
                        lbl.classList.add(q.shuffled[i].correct ? 'selected-correct' : 'selected-wrong');
                    }
                });
            } else {
                container.querySelectorAll('input[type=radio]').forEach(radio => {
                    radio.addEventListener('change', function() {
                        answers[n] = parseInt(this.value);
                        container.querySelectorAll('input[type=radio]').forEach(r => r.disabled = true);
                        this.parentElement.classList.add(
                            q.shuffled[answers[n]].correct ? 'selected-correct' : 'selected-wrong'
                        );
                    });
                });
            }

            document.getElementById('prevBtn').disabled = n === 0;
            document.getElementById('nextBtn').textContent = n === 9 ? 'Завершить тест' : 'Вперёд';
        }

        function nextQuestion() {
            if (currentQuestion < 9) showQuestion(currentQuestion + 1);
            else endQuiz();
        }

        function prevQuestion() {
            if (currentQuestion > 0) showQuestion(currentQuestion - 1);
        }

        function endQuiz(timeout = false) {
            clearInterval(timerInterval);
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';

            let correct = 0;
            answers.forEach((ans, i) => {
                if (ans !== null && selectedQuestions[i].shuffled[ans].correct) correct++;
            });

            document.getElementById('finalName').textContent = userName;
            document.getElementById('finalText').textContent = timeout ? "ВРЕМЯ ВЫШЛО!" : "Тест завершён!";
            document.getElementById('scoreText').innerHTML = `
                <strong>${correct} из 10</strong> правильных<br><br>
                ${correct >= 9 ? "Гениально!" : correct >= 8 ? "Отлично!" : correct >= 6 ? "Хорошо" : correct >= 5 ? "Неплохо" : "Повтори материал!"}
            `;
        }
    </script>
</body>
</html>