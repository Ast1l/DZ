<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Тест по безопасности</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    padding: 20px;
}
.container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
}
button {
    padding: 10px 20px;
    margin: 10px 5px;
    font-size: 16px;
}
.hidden { display: none; }
</style>
</head>
<body>

<div class="container">

<div id="startScreen">
    <h2>Введите ваше ФИО:</h2>
    <input id="fio" type="text" style="width:100%; padding:10px; font-size:16px;">
    <button onclick="startTest()">Начать тест</button>
</div>

<div id="testScreen" class="hidden">
    <h3 id="timer">Осталось времени: 10:00</h3>
    <h2 id="questionText"></h2>
    <div id="answers"></div>
    <button onclick="prevQuestion()">Назад</button>
    <button onclick="nextQuestion()">Далее</button>
</div>

<div id="resultScreen" class="hidden">
    <h2 id="resultText"></h2>
</div>

</div>

<script>
// ============ ТАЙМЕР ===============
let timeLeft = 600;
let timerInterval;

function formatTime(sec) {
    let m = Math.floor(sec / 60);
    let s = sec % 60;
    return `${m}:${s < 10 ? '0'+s : s}`;
}

function startTimer() {
    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = "Осталось времени: " + formatTime(timeLeft);
        if (timeLeft <= 0) finishTest();
    }, 1000);
}

// ============ ВОПРОСЫ ===============

let questions = [
    {
        q: "Что такое патч?",
        correct: "Исправление ошибки или уязвимости",
        wrong: [
            "Файл, ускоряющий работу видеокарты",
            "Антивирусная база данных",
            "Программа для изменения интерфейса"
        ]
    },
    {
        q: "Зачем устанавливать обновления безопасности?",
        correct: "Для устранения уязвимостей",
        wrong: [
            "Чтобы изменить тему оформления",
            "Для ускорения загрузки игр",
            "Чтобы удалить драйверы"
        ]
    },
    {
        q: "Какой пароль считается надежным?",
        correct: "Содержащий буквы, цифры и спецсимволы",
        wrong: [
            "Только из цифр",
            "Имя пользователя",
            "Повторяющиеся символы типа 111111"
        ]
    },
    {
        q: "Что такое фишинг?",
        correct: "Мошенническая попытка получить данные",
        wrong: [
            "Тестирование скорости интернета",
            "Метод оптимизации системы",
            "Проверка памяти компьютера"
        ]
    },
    {
        q: "Что такое брандмауэр?",
        correct: "Система фильтрации сетевого трафика",
        wrong: [
            "Программа для удаления вирусов",
            "Хранилище логинов",
            "Облачное резервирование"
        ]
    },
    {
        q: "Что такое двухфакторная аутентификация?",
        correct: "Подтверждение входа двумя способами",
        wrong: [
            "Резервное копирование данных",
            "Сканирование устройства",
            "Автогенерация пароля"
        ]
    },
    {
        q: "Как распознать вредоносное письмо?",
        correct: "Странный адрес, ссылки, ошибки",
        wrong: [
            "Письмо на вашем языке",
            "Короткий текст письма",
            "Есть вложение в формате PDF"
        ]
    },
    {
        q: "Что нужно делать при подозрении на вирус?",
        correct: "Запустить антивирусную проверку",
        wrong: [
            "Удалить случайные файлы",
            "Отключить интернет",
            "Перезагрузить роутер"
        ]
    },
    {
        q: "Что такое резервное копирование?",
        correct: "Создание копии данных",
        wrong: [
            "Удаление старых файлов",
            "Объединение папок",
            "Оптимизация диска"
        ]
    },
    {
        q: "Что делает антивирус?",
        correct: "Обнаруживает и удаляет вредоносное ПО",
        wrong: [
            "Ускоряет работу процессора",
            "Увеличивает объём оперативной памяти",
            "Создаёт новые драйверы"
        ]
    },
    {
        q: "Что такое вредоносное ПО?",
        correct: "ПО, созданное для нанесения вреда",
        wrong: [
            "ПО для оптимизации игр",
            "Стандартные системные утилиты",
            "ПО для резервного копирования"
        ]
    },
    {
        q: "Что нельзя сообщать незнакомым людям?",
        correct: "Пароли и коды подтверждения",
        wrong: [
            "Модель телефона",
            "Имя домашнего питомца",
            "Любимый цвет"
        ]
    },
    {
        q: "Что такое VPN?",
        correct: "Защищённое соединение через интернет",
        wrong: [
            "Антивирусный модуль",
            "Программа для обновлений",
            "Менеджер файлов"
        ]
    }
];
// ======== ПЕРЕМЕШИВАНИЕ ========
function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

// ======== СОЗДАНИЕ ПОЛНОГО СПИСКА ========
let shuffledQuestions = questions.map(q => {
    let opts = shuffle([q.correct, ...q.wrong]);
    return {
        q: q.q,
        correct: q.correct,
        answers: opts
    };
});

let current = 0;
let userAnswers = Array(shuffledQuestions.length).fill(null);

// ======== ЗАПУСК ТЕСТА ========
function startTest() {
    if (!document.getElementById("fio").value.trim()) {
        alert("Введите ФИО!");
        return;
    }
    document.getElementById("startScreen").classList.add("hidden");
    document.getElementById("testScreen").classList.remove("hidden");
    startTimer();
    loadQuestion();
}

function loadQuestion() {
    let q = shuffledQuestions[current];
    document.getElementById("questionText").textContent = (current + 1) + ". " + q.q;

    let answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    q.answers.forEach(ans => {
        let btn = document.createElement("button");
        btn.textContent = ans;
        btn.style.display = "block";
        btn.style.width = "100%";
        btn.onclick = () => selectAnswer(ans);
        if (userAnswers[current] !== null) btn.disabled = true;
        answersDiv.appendChild(btn);
    });
}

function selectAnswer(ans) {
    if (userAnswers[current] !== null) return;
    userAnswers[current] = ans;
    loadQuestion();
}

function nextQuestion() {
    if (current < shuffledQuestions.length - 1) {
        current++;
        loadQuestion();
    } else {
        finishTest();
    }
}

function prevQuestion() {
    if (current > 0) {
        current--;
        loadQuestion();
    }
}

// ======== ЗАВЕРШЕНИЕ ========
function finishTest() {
    clearInterval(timerInterval);

    let score = 0;
    shuffledQuestions.forEach((q, i) => {
        if (userAnswers[i] === q.correct) score++;
    });

    let grade = (score / shuffledQuestions.length) * 10;

    document.getElementById("testScreen").classList.add("hidden");
    document.getElementById("resultScreen").classList.remove("hidden");

    document.getElementById("resultText").innerHTML =
        "Ваш результат: <b>" + grade.toFixed(1) + "</b> из 10";
}
</script>

</body>
</html>
